# Security Guidelines

Этот документ описывает меры безопасности, реализованные в проекте bioactivity-data-acquisition.

## Инструменты безопасности

### 1. Safety - Проверка уязвимостей зависимостей

Safety проверяет зависимости Python на наличие известных уязвимостей безопасности.

**Использование:**
```bash
# Локальная проверка
make security-check

# Проверка с политикой
safety check --policy-file .safety_policy.yaml

# Проверка с JSON выводом
safety check --json --output safety-report.json
```

**Конфигурация:** `.safety_policy.yaml`

### 2. Bandit - Статический анализ безопасности кода

Bandit выполняет статический анализ Python кода для поиска распространенных проблем безопасности.

**Использование:**
```bash
# Локальная проверка
make security-check

# Проверка с конфигурацией
bandit -r src/ -c .bandit

# Проверка с JSON выводом
bandit -r src/ -f json -o bandit-report.json
```

**Конфигурация:** `.bandit` и `.banditignore`

## Автоматизация безопасности

### GitHub Actions

Security checks интегрированы в CI/CD pipeline:

- **Safety check** - проверка зависимостей на уязвимости
- **Bandit scan** - статический анализ кода
- **Dependabot** - автоматические обновления зависимостей

### Pre-commit Hooks

Security checks выполняются автоматически при коммитах:

- Bandit scan для измененного кода
- Safety check для зависимостей

**Установка:**
```bash
pre-commit install
```

## Политики безопасности

### Игнорирование уязвимостей

Если уязвимость не влияет на использование в проекте, её можно добавить в `.safety_policy.yaml`:

```yaml
ignore:
  - "CVE-2023-12345"  # Описание причины игнорирования
```

### Игнорирование bandit warnings

Если bandit выдает ложные срабатывания, добавьте исключения в `.banditignore`:

```
# Пропустить тестовые файлы
tests/
```

## Регулярные проверки

### Еженедельные обновления

Dependabot автоматически создает PR для обновления зависимостей каждую неделю.

### Ручные проверки

Выполняйте полную проверку безопасности перед релизами:

```bash
# Полная проверка безопасности
make security-report

# Проверка в CI окружении
make ci-security
```

## Мониторинг

Security отчеты сохраняются в папке `reports/`:

- `safety-report.json` - отчет по уязвимостям зависимостей
- `bandit-report.json` - отчет по статическому анализу кода

## Рекомендации

1. **Регулярно обновляйте зависимости** - используйте Dependabot PR
2. **Проверяйте security отчеты** - анализируйте найденные уязвимости
3. **Следуйте принципу минимальных привилегий** - используйте non-root пользователя в Docker
4. **Используйте HTTPS** - для всех внешних API вызовов
5. **Валидируйте входные данные** - используйте pydantic схемы
6. **Логируйте безопасность** - отслеживайте подозрительную активность

## Контакты

При обнаружении уязвимостей безопасности, пожалуйста, свяжитесь с командой разработки через приватные каналы.
