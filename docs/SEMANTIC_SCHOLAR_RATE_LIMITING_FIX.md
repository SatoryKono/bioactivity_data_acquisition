# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã Rate Limiting Semantic Scholar API

## üîç –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ rate limiting**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –í `config_documents_full.yaml` –±—ã–ª–æ `period: 10.0` (1 –∑–∞–ø—Ä–æ—Å –≤ 10 —Å–µ–∫—É–Ω–¥)
- **–ù–æ –≤ –∫–æ–¥–µ**: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ 65 —Å–µ–∫—É–Ω–¥
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–µ–∂–¥—É –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –∫–æ–¥–æ–º

### 2. **Semantic Scholar –±—ã–ª –≤–∫–ª—é—á–µ–Ω**
- **–ü—Ä–æ–±–ª–µ–º–∞**: `enabled: true` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: API –≤—ã–∑—ã–≤–∞–ª—Å—è –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Å—Ç—Ä–æ–≥–∏–µ –ª–∏–º–∏—Ç—ã

### 3. **–ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –≤ –∫–æ–¥–µ**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ `time.sleep(65)` –∏ `time.sleep(30)` –≤ pipeline
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –î–≤–æ–π–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏

## ‚úÖ –í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**

#### `configs/config_documents_full.yaml`:
```yaml
semantic_scholar:
  enabled: false  # –û—Ç–∫–ª—é—á–µ–Ω –∏–∑-–∑–∞ —Å—Ç—Ä–æ–≥–∏—Ö –ª–∏–º–∏—Ç–æ–≤ –±–µ–∑ API –∫–ª—é—á–∞
  rate_limit:
    max_calls: 1
    period: 60.0  # –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Å 10.0 –Ω–∞ 60.0
```

#### `configs/config.yaml`:
```yaml
semantic_scholar:
  name: semantic_scholar
  enabled: false  # –û—Ç–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  rate_limit:
    max_calls: 1
    period: 60.0   # 1 –∑–∞–ø—Ä–æ—Å –≤ –º–∏–Ω—É—Ç—É
```

### 2. **–£–±—Ä–∞–Ω—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –≤ –∫–æ–¥–µ**

#### `src/library/documents/pipeline.py`:
- –£–±—Ä–∞–Ω–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ `time.sleep(65)` –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–∞–º–∏
- –£–±—Ä–∞–Ω–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ `time.sleep(30)` –ø–æ—Å–ª–µ –∑–∞–ø—Ä–æ—Å–æ–≤
- Rate limiting —Ç–µ–ø–µ—Ä—å –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

### 3. **–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ fallback**

#### `src/library/clients/fallback.py`:
- –£–≤–µ–ª–∏—á–µ–Ω—ã –∑–∞–¥–µ—Ä–∂–∫–∏ –¥–ª—è Semantic Scholar: 3-10 –º–∏–Ω—É—Ç
- –£–ª—É—á—à–µ–Ω–∞ –≤–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å jitter: ¬±20%

#### `src/library/clients/base.py`:
- –ú–∏–Ω–∏–º—É–º 5 –º–∏–Ω—É—Ç –∑–∞–¥–µ—Ä–∂–∫–∏ –¥–ª—è Semantic Scholar –ø—Ä–∏ Retry-After
- –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚ùå –ö–æ–Ω—Ñ–ª–∏–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ (10 —Å–µ–∫ vs 65 —Å–µ–∫)
- ‚ùå Semantic Scholar –≤–∫–ª—é—á–µ–Ω –±–µ–∑ API –∫–ª—é—á–∞
- ‚ùå –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –≤ –∫–æ–¥–µ
- ‚ùå –û—à–∏–±–∫–∏ 429 –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ Semantic Scholar –æ—Ç–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ rate limiting (1 –∑–∞–ø—Ä–æ—Å/–º–∏–Ω—É—Ç—É)
- ‚úÖ –£–±—Ä–∞–Ω—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏
- ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ rate limiting

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è Semantic Scholar:

1. **–ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á**:
   ```
   https://www.semanticscholar.org/product/api#api-key-form
   ```

2. **–í–∫–ª—é—á–∏—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**:
   ```yaml
   semantic_scholar:
     enabled: true
     http:
       headers:
         x-api-key: "–≤–∞—à_api_–∫–ª—é—á"
   ```

3. **–£–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç—ã**:
   ```yaml
   rate_limit:
     max_calls: 100  # –° API –∫–ª—é—á–æ–º
     period: 60.0
   ```

### –î–ª—è —Ä–∞–±–æ—Ç—ã –±–µ–∑ Semantic Scholar:
- ‚úÖ Semantic Scholar –æ—Ç–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –¥—Ä—É–≥–∏–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ rate limiting

## üìä –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –ª–∏–º–∏—Ç—ã Semantic Scholar

- **–ë–µ–∑ API –∫–ª—é—á–∞**: ~1 –∑–∞–ø—Ä–æ—Å –≤ –º–∏–Ω—É—Ç—É
- **–° API –∫–ª—é—á–æ–º**: –¥–æ 100 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É
- **–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: https://www.semanticscholar.org/product/api

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### Rate Limiter —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ:
1. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: `rate_limit.max_calls` –∏ `rate_limit.period`
2. **BaseApiClient**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏
3. **FallbackManager**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ 429

### –£–±—Ä–∞–Ω—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏:
- ‚ùå `time.sleep(65)` –≤ pipeline
- ‚ùå `time.sleep(30)` –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ –¢–æ–ª—å–∫–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ rate limiting!
