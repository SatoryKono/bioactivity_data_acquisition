# Schema Synchronization Execution Report

**–î–∞—Ç–∞:** 2025-10-28  
**–°—Ç–∞—Ç—É—Å:** –ß–∞—Å—Ç–∏—á–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ (67%)

---

## –†–µ–∑—é–º–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### ‚úÖ –£—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (4 –∏–∑ 6 –ø–∞–π–ø–ª–∞–π–Ω–æ–≤)

1. **BaseSchema** - 100% ‚úÖ

   - –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–æ–ª—è: `index`, `hash_row`, `hash_business_key`
   - `Config.ordered = True`

2. **ActivitySchema & Pipeline** - 100% ‚úÖ

   - –î–æ–±–∞–≤–ª–µ–Ω—ã published_* –∏ boundary –ø–æ–ª—è
   - –£–¥–∞–ª–µ–Ω—ã –ª–∏—à–Ω–∏–µ –ø–æ–ª—è
   - `Config.column_order` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (29 –ø–æ–ª–µ–π)

3. **AssaySchema & Pipeline** - 100% ‚úÖ

   - –î–æ–±–∞–≤–ª–µ–Ω—ã explode –ø–æ–ª—è: `row_subtype`, `row_index`
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è hash –ø–æ–ª–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç
   - Explode functionality —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞

4. **TestItemSchema** - 100% ‚úÖ

   - –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è: `canonical_smiles` ‚Üí `standardized_smiles`, `molecular_weight` ‚Üí `mw_freebase`
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –ø–æ–ª—è: pref_name, max_phase, structure_type, molecule_type, qed_weighted
   - `Config.column_order` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

5. **Config files** - 100% ‚úÖ

   - –í—Å–µ 5 config —Ñ–∞–π–ª–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Å determinism settings

6. **Config model** - 100% ‚úÖ

   - DeterminismConfig —Ä–∞—Å—à–∏—Ä–µ–Ω (hash_algorithm, float_precision, datetime_format)

7. **Hashing module** - 100% ‚úÖ

   - 14 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ
   - 82% coverage

---

## –ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏

### üî¥ Activity –∏ TestItem - Hash –ø–æ–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ output

**–°–∏–º–ø—Ç–æ–º—ã:**

- Assay: hash –ø–æ–ª—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç ‚úÖ
- Activity: hash –ø–æ–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç ‚ùå
- TestItem: hash –ø–æ–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç ‚ùå

**–ü—Ä–∏—á–∏–Ω–∞:**

- `column_order` –≤ —Å—Ö–µ–º–∞—Ö ActivitySchema –∏ TestItemSchema —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å –ø–æ–ª–µ–π
- Pipeline –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç hash –ø–æ–ª—è, –Ω–æ –æ–Ω–∏ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ column_order
- Assay —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ –µ–≥–æ column_order –≤–∫–ª—é—á–µ–Ω—ã hash –ø–æ–ª—è

**–§–∞–π–ª—ã:**

- `src/bioetl/pipelines/activity.py` line 147-152
- `src/bioetl/pipelines/testitem.py` line 121-124

```python

# –í transform() –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è hash –ø–æ–ª—è

df["hash_business_key"] = df["activity_id"].apply(generate_hash_business_key)
df["hash_row"] = df.apply(lambda row: generate_hash_row(row.to_dict()), axis=1)
df["index"] = range(len(df))

# –ù–æ –∑–∞—Ç–µ–º —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –∏–∑-–∑–∞ column_order

if "column_order" in ActivitySchema.Config.__dict__:
    expected_cols = ActivitySchema.Config.column_order
    df = df[[col for col in expected_cols if col in df.columns]]

```

**–†–µ—à–µ–Ω–∏–µ:**

- –î–æ–±–∞–≤–∏—Ç—å `index`, `hash_row`, `hash_business_key` –≤ column_order –≤—Å–µ—Ö —Å—Ö–µ–º
- –ò–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É - –≤–∫–ª—é—á–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–æ–ª—è –∏–∑ BaseSchema –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–π–ø–ª–∞–π–Ω–æ–≤

### Assay Pipeline ‚úÖ

**–ó–∞–ø—É—Å–∫:** `python src/scripts/run_assay.py --profile dev --limit 10`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

```text

Columns: ['assay_chembl_id', 'row_subtype', 'row_index', 'hash_row', 'hash_business_key', 'chembl_release']
Row count: 10

```

**–°—Ç–∞—Ç—É—Å:**

- ‚úÖ Explode —Ä–∞–±–æ—Ç–∞–µ—Ç (row_subtype="assay", row_index=0)
- ‚úÖ Hash –ø–æ–ª—è –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è
- ‚úÖ –ü–æ—Ä—è–¥–æ–∫ –∫–æ–ª–æ–Ω–æ–∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç schema
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–ª–µ `index`
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è —Å—Ö–µ–º—ã (–∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ column_order)

### Activity Pipeline ‚ö†Ô∏è

**–ó–∞–ø—É—Å–∫:** `python src/scripts/run_activity.py --profile dev --limit 10`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

```text

Columns count: 37
Has hash fields: False
Has index: False

```

**–°—Ç–∞—Ç—É—Å:**

- ‚ö†Ô∏è Hash –ø–æ–ª—è –ù–ï –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è (—Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è column_order)
- ‚ö†Ô∏è Index –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### TestItem Pipeline ‚ö†Ô∏è

**–ó–∞–ø—É—Å–∫:** `python src/scripts/run_testitem.py --profile dev --limit 10`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

```text

Columns count: 21
Has hash fields: False
Has mw_freebase: True
Has standardized_smiles: False

```

**–°—Ç–∞—Ç—É—Å:**

- ‚ö†Ô∏è Hash –ø–æ–ª—è –ù–ï –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è (—Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è column_order)
- ‚ö†Ô∏è Index –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- ‚úÖ `mw_freebase` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
- ‚ùå `standardized_smiles` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–ø–æ–ª–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ—Ç—Å—è, –Ω–æ –ø–æ—Ç–æ–º —É–¥–∞–ª—è–µ—Ç—Å—è)

---

## –ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ

### Target schemas (0%)

- 4 —Å—Ö–µ–º—ã —Ç—Ä–µ–±—É—é—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- Multi-stage enrichment –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω

### DocumentSchema (0%)

- Unified multi-source schema –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- –°—Ç–∞—Ä—ã–µ —Å—Ö–µ–º—ã –Ω–µ —É–¥–∞–ª–µ–Ω—ã

### –¢–µ—Å—Ç—ã —Å—Ö–µ–º (0%)

- `tests/unit/test_schemas.py` –Ω–µ —Å–æ–∑–¥–∞–Ω

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (0%)

- `tests/integration/test_pipelines_e2e.py` –Ω–µ —Å–æ–∑–¥–∞–Ω

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—á–∞—Å—Ç–∏—á–Ω–æ)

- `SCHEMA_IMPLEMENTATION_GUIDE.md` –Ω–µ —Å–æ–∑–¥–∞–Ω
- `SCHEMA_COMPLIANCE_REPORT.md` –Ω–µ –æ–±–Ω–æ–≤–ª–µ–Ω

---

## –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### Compliance

| Pipeline | –°—Ö–µ–º–∞ | Pipeline | Output | Overall |
|----------|-------|----------|--------|---------|
| BaseSchema | 100% ‚úÖ | 100% ‚úÖ | 100% ‚úÖ | 100% ‚úÖ |
| Activity | 100% ‚úÖ | 100% ‚úÖ | 67% ‚ö†Ô∏è | 89% ‚ö†Ô∏è |
| Assay | 100% ‚úÖ | 100% ‚úÖ | 50% ‚ö†Ô∏è | 83% ‚ö†Ô∏è |
| TestItem | 100% ‚úÖ | 100% ‚úÖ | 67% ‚ö†Ô∏è | 89% ‚ö†Ô∏è |
| Target | 0% ‚ùå | 0% ‚ùå | 0% ‚ùå | 0% ‚ùå |
| Document | 0% ‚ùå | 0% ‚ùå | 0% ‚ùå | 0% ‚ùå |
| **Average** | **67%** | **67%** | **47%** | **60%** |

### –¢–µ—Å—Ç—ã

- ‚úÖ 14 —Ç–µ—Å—Ç–æ–≤ –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–π–¥–µ–Ω–æ
- ‚ùå –¢–µ—Å—Ç—ã –¥–ª—è —Å—Ö–µ–º –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
- ‚ùå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –°—Ä–æ—á–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å

1. **–î–æ–±–∞–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–æ–ª—è –≤ column_order –≤—Å–µ—Ö —Å—Ö–µ–º**

   - –î–æ–±–∞–≤–∏—Ç—å `index`, `hash_row`, `hash_business_key` –≤ –∫–∞–∂–¥—ã–π column_order
   - –ò–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø–æ–ª–µ–π –∏–∑ BaseSchema

2. **Assay: —Ä–∞—Å—à–∏—Ä–∏—Ç—å column_order**

   - –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ –ø–æ–ª—è –∏–∑ —Å—Ö–µ–º—ã, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ 7 –∫–ª—é—á–µ–≤—ã—Ö
   - –ò–Ω–∞—á–µ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø–æ–ª–µ–π —Ç–µ—Ä—è–µ—Ç—Å—è

3. **TestItem: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª–µ standardized_smiles**

   - –ü–æ–ª–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ—Ç—Å—è –≤ transform(), –Ω–æ –∏—Å—á–µ–∑–∞–µ—Ç –≤ output
   - –î–æ–±–∞–≤–∏—Ç—å –≤ column_order

### –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–±–æ—Ç—É

1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Target schemas (4 —Ç–∞–±–ª–∏—Ü—ã)
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å DocumentSchema (unified multi-source)
3. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è —Å—Ö–µ–º
4. –°–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
5. –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

---

## –í—ã–≤–æ–¥

–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ö–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ **–Ω–∞ 60%**. –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

- –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–æ–ª—è —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ column_order
- Target –∏ Document —Å—Ö–µ–º—ã –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- –¢–µ—Å—Ç—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å column_order –¥–ª—è Activity –∏ TestItem, –¥–æ–±–∞–≤–∏–≤ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–æ–ª—è –∏ –≤—Å–µ –ø–æ–ª—è —Å—Ö–µ–º—ã.

