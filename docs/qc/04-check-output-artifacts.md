# bioetl-check-output-artifacts

Утилита проверяет артефакты в `data/output` и помогает вынести крупные файлы во внешнее хранилище.

## Поведение

- Регистрирует запуск через `UnifiedLogger` и определяет корень репозитория (см. `get_project_root`).
- Ищет файлы, отслеживаемые Git, и предупреждает, если они лежат в `data/output`.
- Проверяет индекс (`git diff --cached`) и сигнализирует о новых артефактах, готовящихся к коммиту.
- Рекурсивно сканирует `data/output`, вычисляет размер каждого файла и формирует список превышений порога.
- При наличии проблем печатает сообщения в STDOUT и завершает работу с кодом `1`. При отсутствии проблем возвращает код `0`.

## Порог размера и опции

- Опция `--max-bytes` задаёт верхнюю границу размера файла в байтах.
- Значение по умолчанию — `MAX_BYTES = 1_000_000` (1 MB), определено в `src/bioetl/tools/check_output_artifacts.py`.

## Пример запуска

```bash
bioetl-check-output-artifacts --max-bytes 2_000_000
```

Тесты (`tests/bioetl/cli/test_check_output_artifacts.py`) гарантируют ненулевой код выхода при обнаружении нарушений.

## Источники реализации

- Логика проверки: `src/bioetl/tools/check_output_artifacts.py`.
- CLI-обёртка и обработка опций: `src/bioetl/cli/tools/check_output_artifacts.py`.

## Связанные материалы

- [Инвентаризация CLI-утилит](../cli/03-cli-utilities.md)

