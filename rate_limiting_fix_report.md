# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ rate limiting

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –≤ rate limiter

**–§–∞–π–ª**: `src/library/clients/base.py` (—Å—Ç—Ä–æ–∫–∏ 184-216)

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ rate limit –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∞ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ –±–µ–∑ —Ü–∏–∫–ª–∞ –æ–∂–∏–¥–∞–Ω–∏—è.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**:
- –î–æ–±–∞–≤–ª–µ–Ω —Ü–∏–∫–ª —Å –º–∞–∫—Å–∏–º—É–º 5 –ø–æ–ø—ã—Ç–∫–∞–º–∏ –¥–ª—è rate limiting
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π backoff: `delay = base_delay * (2^attempt) + jitter`
- –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–π –ø–æ–ø—ã—Ç–∫–∏
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø–æ–ø—ã—Ç–∫–∏ —Å –ø—Ä–æ–±—Ä–æ—Å–æ–º –æ—à–∏–±–∫–∏

**–ë—ã–ª–æ**:
```python
except RateLimitError as e:
    time.sleep(delay)
    self.rate_limiter.acquire()  # –ú–æ–∂–µ—Ç —Å–Ω–æ–≤–∞ —É–ø–∞—Å—Ç—å!
```

**–°—Ç–∞–ª–æ**:
```python
for attempt in range(max_rate_limit_retries):
    try:
        self.rate_limiter.acquire()
        break  # –£—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–∏–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
    except RateLimitError as e:
        if attempt == max_rate_limit_retries - 1:
            raise  # –ü–æ—Å–ª–µ–¥–Ω—è—è –ø–æ–ø—ã—Ç–∫–∞
        # –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π backoff
        delay = base_delay * (2 ** attempt) + random.uniform(0, 1)
        time.sleep(delay)
```

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è rate limiting –æ—Å—Ç–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ–π

**–§–∞–π–ª**: `configs/config_assay.yaml` (—Å—Ç—Ä–æ–∫–∏ 19-21)

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏**:
- `max_calls`: 5 –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ –ø–µ—Ä–∏–æ–¥
- `period`: 15.0 —Å–µ–∫—É–Ω–¥

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å API –±–µ–∑ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏.

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –ê–ª–≥–æ—Ä–∏—Ç–º —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ backoff:
1. **–ü–æ–ø—ã—Ç–∫–∞ 1**: delay = base_delay + jitter
2. **–ü–æ–ø—ã—Ç–∫–∞ 2**: delay = base_delay * 2 + jitter  
3. **–ü–æ–ø—ã—Ç–∫–∞ 3**: delay = base_delay * 4 + jitter
4. **–ü–æ–ø—ã—Ç–∫–∞ 4**: delay = base_delay * 8 + jitter
5. **–ü–æ–ø—ã—Ç–∫–∞ 5**: delay = base_delay * 16 + jitter

### –ü—Ä–∏–º–µ—Ä —Å —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π:
- base_delay = 15 —Å–µ–∫—É–Ω–¥
- –ü–æ–ø—ã—Ç–∫–∞ 1: ~15 —Å–µ–∫
- –ü–æ–ø—ã—Ç–∫–∞ 2: ~30 —Å–µ–∫  
- –ü–æ–ø—ã—Ç–∫–∞ 3: ~60 —Å–µ–∫
- –ü–æ–ø—ã—Ç–∫–∞ 4: ~120 —Å–µ–∫
- –ü–æ–ø—ã—Ç–∫–∞ 5: ~240 —Å–µ–∫

## üìä –û–ñ–ò–î–ê–ï–ú–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø

1. **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: Pipeline –Ω–µ –±—É–¥–µ—Ç –ø—Ä–µ—Ä—ã–≤–∞—Ç—å—Å—è –∏–∑-–∑–∞ rate limiting
2. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: 5 –ø–æ–ø—ã—Ç–æ–∫ –≤–º–µ—Å—Ç–æ 1 –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞
3. **–ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ—Å—Ç—å**: –°–æ—Ö—Ä–∞–Ω–µ–Ω—ã –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ rate limiting (5 –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ 15 —Å–µ–∫)
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

–°–æ–∑–¥–∞–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã:
- `test_rate_limiting.py` - –ø–æ–ª–Ω—ã–π —Ç–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- `simple_test.py` - –±–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç –∏–º–ø–æ—Ä—Ç–æ–≤ –∏ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø

1. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –ª–æ–º–∞—é—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π API
2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π backoff –º–æ–∂–µ—Ç —É–≤–µ–ª–∏—á–∏—Ç—å –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∏ —á–∞—Å—Ç—ã—Ö rate limit
3. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –£–≤–µ–ª–∏—á–∏—Ç—Å—è –æ–±—ä–µ–º –ª–æ–≥–æ–≤ –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º rate limiting

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (assay pipeline)
2. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç rate limiting —Å–æ–±—ã—Ç–∏–π
3. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã backoff
4. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ circuit breaker –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∑–∞—â–∏—Ç—ã

## ‚úÖ –°–¢–ê–¢–£–°

**–ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –í–ù–ï–°–ï–ù–´ –ò –ì–û–¢–û–í–´ –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ**

–ö–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫, –ª–æ–≥–∏–∫–∞ rate limiting –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞.
