version: 1
pipeline:
  name: "base"
  entity: "abstract"
  version: "1.0.0"
  release_scope: true

http:
  global:
    timeout_sec: 60.0
    retries:
      total: 5
      backoff_multiplier: 2.0
      backoff_max: 120.0
      statuses: [408, 425, 429, 500, 502, 503, 504]
    rate_limit:
      max_calls: 5
      period: 15.0
    headers: {}

cache:
  enabled: true
  directory: "data/cache"
  ttl: 86400
  release_scoped: true

paths:
  input_root: "data/input"
  output_root: "data/output"

materialization:
  root: "data/output"
  default_format: "parquet"
  formats:
    parquet:
      extension: ".parquet"
    csv:
      extension: ".csv"
  stages:
    silver:
      format: "parquet"
      directory: "."
      datasets:
        uniprot:
          filename: "targets_silver"
        component_enrichment:
          filename: "component_enrichment"
    iuphar:
      format: "parquet"
      directory: "."
      datasets:
        classification:
          filename: "targets_iuphar_classification"
        iuphar_gold:
          filename: "targets_iuphar_enrichment"
    gold:
      format: "parquet"
      directory: "."
      datasets:
        targets:
          filename: "targets_final"
        target_components:
          filename: "target_components"
        protein_class:
          filename: "protein_class"
        target_xref:
          filename: "target_xref"
    qc:
      format: "csv"
      directory: "."
      datasets:
        qc_report:
          filename: "targets_qc"

determinism:
  sort:
    by: []
    ascending: []
  column_order: []

sources:
  pubchem:
    enabled: true
    base_url: "https://pubchem.ncbi.nlm.nih.gov/rest/pug"
    headers:
      Accept: "application/json"
      User-Agent: "bioetl-pubchem-default/1.0"

postprocess:
  qc:
    enabled: true

qc:
  enabled: true
  severity_threshold: "warning"
  thresholds: {}

cli:
  default_config: "configs/base.yaml"
  mode_choices: ["default"]
  fail_on_schema_drift: true
  extended: false
  dry_run: false
  verbose: false
  validate_columns: true

