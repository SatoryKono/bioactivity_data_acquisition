extends: ../base.yaml

pipeline:
  name: document
  entity: document

sources:
  chembl:
    enabled: true
    base_url: "https://www.ebi.ac.uk/chembl/api/data"
    batch_size: 10
    max_url_length: 2000
  
  pubmed:
    enabled: true  # PubMed enrichment
    base_url: "https://eutils.ncbi.nlm.nih.gov/entrez/eutils"
    tool: "bioactivity_etl"
    email: "821311@gmail.com"
    api_key: "${PUBMED_API_KEY}"
    batch_size: 200
    rate_limit_max_calls: 3  # 10 with API key
    rate_limit_period: 1.0
    workers: 1
  
  crossref:
    enabled: true  # Crossref enrichment
    base_url: "https://api.crossref.org"
    mailto: "${CROSSREF_MAILTO}"
    batch_size: 100
    rate_limit_max_calls: 2
    rate_limit_period: 1.0
    workers: 2
  
  openalex:
    enabled: true  # OpenAlex enrichment
    base_url: "https://api.openalex.org"
    batch_size: 100
    rate_limit_max_calls: 10
    rate_limit_period: 1.0
    workers: 4
  
  semantic_scholar:
    enabled: true  # Semantic Scholar enrichment
    base_url: "https://api.semanticscholar.org/graph/v1"
    api_key: "${SEMANTIC_SCHOLAR_API_KEY}"
    batch_size: 50
    rate_limit_max_calls: 1  # 10 with API key
    rate_limit_period: 1.25
    workers: 1

determinism:
  hash_algorithm: "sha256"
  float_precision: 6
  datetime_format: "iso8601"
  sort:
    by: ["document_chembl_id"]
    ascending: [true]

qc:
  enabled: true
  severity_threshold: warning

